{% extends "delivery_app/base.html" %}
{% load static %}

{% block title %}–ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ –∫—É–ø–æ–Ω—ã - –î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤{% endblock %}

{% block content %}
<div class="promocodes-simple">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="simple-header">
        <h1>–ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ –∫—É–ø–æ–Ω—ã</h1>
        <div class="header-info">
            <span>–ê–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞: {{ current_date }}</span>
        </div>
    </div>

    <div class="simple-content">
        <!-- –í–≤–µ–¥–µ–Ω–∏–µ -->
        <div class="intro-box">
            <p><strong>–≠–∫–æ–Ω–æ–º—å—Ç–µ —Å –Ω–∞—à–∏–º–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏!</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∫–∏–¥–æ–∫ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –∏ –ø—Ä–æ–¥—É–∫—Ç—ã.</p>
        </div>

        <!-- –î–µ–π—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã -->
        <section class="promocodes-section active-promocodes">
            <div class="section-header">
                <div class="section-title">
                    <span class="title-icon">üéÅ</span>
                    <h2>–î–µ–π—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã</h2>
                </div>
                <span class="section-count">{{ active_promocodes|length }} –∞–∫—Ç–∏–≤–Ω—ã—Ö</span>
            </div>

            {% if active_promocodes %}
            <div class="promocodes-grid">
                {% for promo in active_promocodes %}
                <div class="promocode-card active">
                    <div class="promocode-header">
                        <div class="promocode-badge">
                            <span class="badge-icon">üî•</span>
                            <span class="badge-text">–ê–∫—Ç–∏–≤–µ–Ω</span>
                        </div>
                        <div class="discount-amount">
                            <span class="discount-value">{{ promo.discount }}</span>
                            <span class="discount-symbol">%</span>
                        </div>
                    </div>

                    <div class="promocode-body">
                        <div class="promocode-code">
                            <span class="code-label">–ö–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞:</span>
                            <div class="code-value" onclick="copyPromoCode('{{ promo.code }}')">
                                <span class="code-text">{{ promo.code }}</span>
                                <span class="copy-icon">üìã</span>
                            </div>
                        </div>

                        <div class="promocode-details">
                            <div class="detail-item">
                                <span class="detail-icon">üìù</span>
                                <div class="detail-content">
                                    <span class="detail-label">–û–ø–∏—Å–∞–Ω–∏–µ</span>
                                    <span class="detail-value">
                                        {% if promo.description %}
                                            {{ promo.description }}
                                        {% else %}
                                            –°–∫–∏–¥–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑
                                        {% endif %}
                                    </span>
                                </div>
                            </div>

                            <div class="detail-item">
                                <span class="detail-icon">‚è∞</span>
                                <div class="detail-content">
                                    <span class="detail-label">–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ</span>
                                    <span class="detail-value">{{ promo.valid_to|date:'d.m.Y' }}</span>
                                </div>
                            </div>

                            {% if promo.min_order_amount %}
                            <div class="detail-item">
                                <span class="detail-icon">üí∞</span>
                                <div class="detail-content">
                                    <span class="detail-label">–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑</span>
                                    <span class="detail-value">{{ promo.min_order_amount }} BYN</span>
                                </div>
                            </div>
                            {% endif %}

                            {% if promo.usage_limit %}
                            <div class="detail-item">
                                <span class="detail-icon">üë•</span>
                                <div class="detail-content">
                                    <span class="detail-label">–õ–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π</span>
                                    <span class="detail-value">{{ promo.used_count }}/{{ promo.usage_limit }}</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="promocode-footer">
                        <div class="time-remaining">
                            {% now "Y-m-d" as current_date %}
                            {% if promo.valid_to|date:"Y-m-d" > current_date %}
                                <span class="time-text">–û—Å—Ç–∞–ª–æ—Å—å: {{ promo.valid_to|timeuntil }}</span>
                            {% else %}
                                <span class="time-text">–î–µ–π—Å—Ç–≤—É–µ—Ç —Å–µ–≥–æ–¥–Ω—è</span>
                            {% endif %}
                        </div>
                        <button class="use-btn" onclick="usePromoCode('{{ promo.code }}')">
                            <span class="btn-icon">üéØ</span>
                            –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <div class="empty-icon">üéÅ</div>
                <h3>–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –Ω–µ—Ç</h3>
                <p>–ù–æ–≤—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –ø–æ—è–≤—è—Ç—Å—è —Å–∫–æ—Ä–æ. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!</p>
            </div>
            {% endif %}
        </section>

        <!-- –ê—Ä—Ö–∏–≤ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ -->
        <section class="promocodes-section archived-promocodes">
            <div class="section-header">
                <div class="section-title">
                    <span class="title-icon">üìö</span>
                    <h2>–ê—Ä—Ö–∏–≤ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤</h2>
                </div>
                <span class="section-count">{{ archived_promocodes|length }} –≤ –∞—Ä—Ö–∏–≤–µ</span>
            </div>

            {% if archived_promocodes %}
            <div class="promocodes-grid">
                {% for promo in archived_promocodes %}
                <div class="promocode-card archived">
                    <div class="promocode-header">
                        <div class="promocode-badge">
                            <span class="badge-icon">üìÑ</span>
                            <span class="badge-text">–ó–∞–≤–µ—Ä—à–µ–Ω</span>
                        </div>
                        <div class="discount-amount">
                            <span class="discount-value">{{ promo.discount }}</span>
                            <span class="discount-symbol">%</span>
                        </div>
                    </div>

                    <div class="promocode-body">
                        <div class="promocode-code">
                            <span class="code-label">–ö–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞:</span>
                            <div class="code-value archived">
                                <span class="code-text">{{ promo.code }}</span>
                            </div>
                        </div>

                        <div class="promocode-details">
                            <div class="detail-item">
                                <span class="detail-icon">üìù</span>
                                <div class="detail-content">
                                    <span class="detail-label">–û–ø–∏—Å–∞–Ω–∏–µ</span>
                                    <span class="detail-value">
                                        {% if promo.description %}
                                            {{ promo.description }}
                                        {% else %}
                                            –°–∫–∏–¥–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑
                                        {% endif %}
                                    </span>
                                </div>
                            </div>

                            <div class="detail-item">
                                <span class="detail-icon">‚è∞</span>
                                <div class="detail-content">
                                    <span class="detail-label">–ò—Å—Ç—ë–∫</span>
                                    <span class="detail-value">{{ promo.valid_to|date:'d.m.Y' }}</span>
                                </div>
                            </div>

                            {% if promo.usage_limit %}
                            <div class="detail-item">
                                <span class="detail-icon">üìä</span>
                                <div class="detail-content">
                                    <span class="detail-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω</span>
                                    <span class="detail-value">{{ promo.used_count }} —Ä–∞–∑</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="promocode-footer">
                        <div class="expired-notice">
                            <span class="expired-text">–ü—Ä–æ–º–æ–∫–æ–¥ –±–æ–ª–µ–µ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <div class="empty-icon">üìö</div>
                <h3>–ê—Ä—Ö–∏–≤ –ø—É—Å—Ç</h3>
                <p>–ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã</p>
            </div>
            {% endif %}
        </section>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–º–æ–∫–æ–¥–∞—Ö -->
        <section class="info-section">
            <div class="info-cards">
                <div class="info-card">
                    <div class="info-icon">üí°</div>
                    <h3>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥?</h3>
                    <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –Ω–∞ —ç—Ç–∞–ø–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ "–ü—Ä–æ–º–æ–∫–æ–¥"</p>
                </div>
                
                <div class="info-card">
                    <div class="info-icon">‚ö†Ô∏è</div>
                    <h3>–í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å</h3>
                    <p>–û–¥–∏–Ω –ø—Ä–æ–º–æ–∫–æ–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –ù–µ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∞–∫—Ü–∏—è–º–∏.</p>
                </div>
                
                <div class="info-card">
                    <div class="info-icon">üìû</div>
                    <h3>–ü–æ–º–æ—â—å</h3>
                    <p>–ï—Å–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –ø–æ–º–æ—â–∏.</p>
                </div>
            </div>
        </section>
    </div>
</div>

<style>
/* === –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò === */
.promocodes-simple * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

.promocodes-simple {
    max-width: 1200px;
    margin: 80px auto 40px;
    padding: 0 20px;
    font-family: 'Inter', Arial, sans-serif;
    line-height: 1.5;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
.simple-header {
    background: linear-gradient(135deg, #9dafff 0%, #c995fd 100%);
    color: white;
    padding: 25px 30px;
    border-radius: 8px;
    margin-bottom: 30px;
    text-align: center;
}

.simple-header h1 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 10px;
}

.header-info {
    font-size: 14px;
    opacity: 0.9;
}

/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
.simple-content {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 30px;
}

/* –í–≤–µ–¥–µ–Ω–∏–µ */
.intro-box {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 6px;
    border-left: 4px solid #2c5aa0;
    margin-bottom: 30px;
    text-align: center;
}

.intro-box p {
    margin: 0;
    color: #333;
    font-size: 16px;
}

/* === –°–ï–ö–¶–ò–ò –ü–†–û–ú–û–ö–û–î–û–í === */
.promocodes-section {
    margin-bottom: 40px;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #f0f0f0;
}

.section-title {
    display: flex;
    align-items: center;
    gap: 12px;
}

.title-icon {
    font-size: 24px;
}

.section-title h2 {
    color: #2c5aa0;
    font-size: 20px;
    margin: 0;
}

.section-count {
    background: #e9ecef;
    color: #6c757d;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 14px;
    font-weight: 500;
}

/* –°–µ—Ç–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ */
.promocodes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 20px;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞ */
.promocode-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

/* –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã */
.promocode-card.active {
    border-left: 4px solid #28a745;
    box-shadow: 0 4px 15px rgba(40, 167, 69, 0.1);
}

.promocode-card.active:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(40, 167, 69, 0.15);
}

/* –ê—Ä—Ö–∏–≤–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã */
.promocode-card.archived {
    border-left: 4px solid #6c757d;
    opacity: 0.7;
    background: #f8f9fa;
}

.promocode-card.archived:hover {
    opacity: 0.9;
    transform: translateY(-2px);
}

/* –®–∞–ø–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
.promocode-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

.promocode-badge {
    display: flex;
    align-items: center;
    gap: 6px;
}

.badge-icon {
    font-size: 14px;
}

.badge-text {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
}

.active .badge-text {
    color: #28a745;
}

.archived .badge-text {
    color: #6c757d;
}

.discount-amount {
    display: flex;
    align-items: baseline;
    gap: 2px;
}

.discount-value {
    font-size: 24px;
    font-weight: 700;
    color: #dc3545;
}

.discount-symbol {
    font-size: 16px;
    font-weight: 600;
    color: #dc3545;
}

/* –¢–µ–ª–æ –∫–∞—Ä—Ç–æ—á–∫–∏ */
.promocode-body {
    padding: 20px;
    flex: 1;
}

.promocode-code {
    margin-bottom: 20px;
}

.code-label {
    display: block;
    font-size: 12px;
    color: #6c757d;
    margin-bottom: 6px;
    font-weight: 500;
}

.code-value {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #2c5aa0;
    color: white;
    padding: 12px 15px;
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    cursor: pointer;
    transition: all 0.2s ease;
}

.code-value:hover {
    background: #1e3d6f;
    transform: scale(1.02);
}

.code-text {
    font-size: 16px;
    font-weight: 600;
    letter-spacing: 1px;
}

.copy-icon {
    font-size: 14px;
    opacity: 0.8;
}

.code-value.archived {
    background: #6c757d;
    cursor: default;
}

.code-value.archived:hover {
    background: #6c757d;
    transform: none;
}

/* –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ */
.promocode-details {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.detail-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
}

.detail-icon {
    font-size: 14px;
    margin-top: 2px;
    flex-shrink: 0;
}

.detail-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.detail-label {
    font-size: 12px;
    color: #6c757d;
    font-weight: 500;
}

.detail-value {
    font-size: 14px;
    color: #333;
    font-weight: 500;
}

/* –ü–æ–¥–≤–∞–ª –∫–∞—Ä—Ç–æ—á–∫–∏ */
.promocode-footer {
    padding: 15px 20px;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.time-remaining .time-text {
    font-size: 12px;
    color: #28a745;
    font-weight: 500;
}

.expired-notice .expired-text {
    font-size: 12px;
    color: #dc3545;
    font-weight: 500;
}

.use-btn {
    background: #28a745;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s ease;
    font-weight: 500;
}

.use-btn:hover {
    background: #218838;
    transform: translateY(-1px);
}

/* –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ */
.empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #666;
    background: #f8f9fa;
    border-radius: 8px;
    border: 2px dashed #e0e0e0;
}

.empty-icon {
    font-size: 48px;
    margin-bottom: 15px;
    opacity: 0.5;
}

.empty-state h3 {
    color: #333;
    margin-bottom: 10px;
}

.empty-state p {
    margin: 0;
}

/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–µ–∫—Ü–∏—è */
.info-section {
    margin-top: 40px;
    padding-top: 30px;
    border-top: 2px solid #f0f0f0;
}

.info-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.info-card {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 8px;
    text-align: center;
    border: 1px solid #e9ecef;
    transition: all 0.3s ease;
}

.info-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.info-icon {
    font-size: 32px;
    margin-bottom: 15px;
}

.info-card h3 {
    color: #2c5aa0;
    margin-bottom: 10px;
    font-size: 16px;
}

.info-card p {
    color: #666;
    font-size: 14px;
    line-height: 1.5;
    margin: 0;
}

/* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
@media (max-width: 768px) {
    .promocodes-simple {
        margin: 70px auto 30px;
        padding: 0 15px;
    }
    
    .simple-header {
        padding: 20px;
    }
    
    .simple-header h1 {
        font-size: 20px;
    }
    
    .simple-content {
        padding: 20px;
    }
    
    .section-header {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }
    
    .promocodes-grid {
        grid-template-columns: 1fr;
    }
    
    .promocode-footer {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }
    
    .info-cards {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .simple-header {
        padding: 15px;
    }
    
    .simple-content {
        padding: 15px;
    }
    
    .promocode-header,
    .promocode-body,
    .promocode-footer {
        padding: 15px;
    }
    
    .code-value {
        flex-direction: column;
        gap: 8px;
        text-align: center;
    }
    
    .empty-state {
        padding: 30px 15px;
    }
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */
.promocode-card {
    transition: all 0.3s ease;
}

.use-btn {
    transition: all 0.2s ease;
}

.code-value {
    transition: all 0.2s ease;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.promocode-card.active:hover .discount-amount {
    animation: pulse 1s ease-in-out;
}

/* –í—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
::selection {
    background-color: #2c5aa0;
    color: white;
}

::-moz-selection {
    background-color: #2c5aa0;
    color: white;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ */
.time-remaining {
    font-weight: 500;
}

.expired-notice {
    font-weight: 500;
}
</style>

<script>
function copyPromoCode(code) {
    navigator.clipboard.writeText(code).then(function() {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
        showNotification('–ü—Ä–æ–º–æ–∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ' + code);
    }).catch(function(err) {
        // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
        const textArea = document.createElement('textarea');
        textArea.value = code;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        showNotification('–ü—Ä–æ–º–æ–∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ' + code);
    });
}

function usePromoCode(code) {
    showNotification('–ü—Ä–æ–º–æ–∫–æ–¥ ' + code + ' –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –µ–≥–æ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞.');
    
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞
    // –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
    localStorage.setItem('selectedPromoCode', code);
}

function showNotification(message) {
    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #28a745;
        color: white;
        padding: 12px 20px;
        border-radius: 6px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        z-index: 1000;
        font-weight: 500;
        animation: slideIn 0.3s ease-out;
    `;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    }, 3000);
}

// –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
    }
`;
document.head.appendChild(style);

document.addEventListener('DOMContentLoaded', function() {
    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∞–º
    const promoCards = document.querySelectorAll('.promocode-card.active');
    
    promoCards.forEach(card => {
        card.addEventListener('click', function(e) {
            if (!e.target.closest('.use-btn') && !e.target.closest('.code-value')) {
                this.classList.toggle('expanded');
            }
        });
    });
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
    const savedPromoCode = localStorage.getItem('selectedPromoCode');
    if (savedPromoCode) {
        console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥:', savedPromoCode);
        // –ú–æ–∂–Ω–æ –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–º–æ–∫–æ–¥
    }
});
</script>
{% endblock %}